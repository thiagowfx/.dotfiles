# shellcheck source=/dev/null
# Base shell functions for bash and zsh.

# Sets an alias ($1) to value ($2) if $3 exists.
set_alias() {
        # shellcheck disable=SC2139
        hash "$3" >/dev/null 2>&1 && alias "$1"="$2"
}

# Exports a shell environment variable ($1) to the first of the rest of the
# arguments that exist.
set_env() {
        local f var="$1"; shift
        for f in "$@"; do
                hash "$f" >/dev/null 2>&1 && export "$var"="$f"
                return
        done
}

# Adds paths to $PATH if they exist.
path_munge() {
        local f
        for f in "$@"; do
                if [ -d "$f" ] && ! grep -E -q "(^|:)$f($|:)" <<< "$PATH"; then
                        PATH="$f:$PATH"
                fi
        done
}

# Sources files and directories recursively if they exist.
src_files() {
        local f
        for f in "$@"; do
                # Source directories.
                if [ -d "$f" ]; then
                        src_files "$f"/* || true
                # Source files.
                elif [ -f "$f" ]; then
                        . "$f" || true
                fi
        done
}

# vim:ft=sh
