# -*- shell-script -*-

# enable aliases for sudo
alias sudo='sudo '

# custom aliases
alias emq="emacs -nw"
alias pingg="ping google.com"

# non-verbose output
alias gdb="gdb -q"

# verbose output
alias xz="xz -v"
alias gzip="gzip -v"
alias gunzip="gunzip -v"
alias cp="cp -v"
alias ln="ln -v"
alias mv="mv -v"
alias rm="rm -v"
alias rmdir="rmdir -v"
alias chmod="chmod -v"
alias chown="chown -v"

# change default behavior of some programs
alias acpi="date && acpi"
alias colordiff="colordiff -uN"
alias cower='cower --color=always --sort=votes --target="${HOME}"/.aur'
alias df='df -h'
alias diff="diff -uN"
alias du="du -h"
alias free="free -m"
alias grep="grep --color=auto"
alias i3lock="i3lock-wrapper || i3lock -c 222222"
alias lynx="lynx -emacskeys"
alias make="time make -j3"
alias makepkg="time makepkg"
alias pgrep="pgrep --list-name"
alias reflector="reflector -x rsync"
alias rsync="rsync --progress"
alias smem="smem -k"
alias strace="strace -t"
alias trayer="trayer --edge top --align right --widthtype request --SetDockType false"
alias uptime="uptime --pretty"

## Android
alias emulator-template="emulator -avd "Intel-10-480x800" -qemu --enable-kvm -dns-server 8.8.8.8,8.8.4.4"
alias emulator-template-kill="adb emu kill"

## ffmpeg
alias ffmpeg-template-screencast-plusmic="ffmpeg -f x11grab -s wxga -r 30 -i :0.0 -f alsa -ac 2 -i pulse -qscale 0 /tmp/out.mpg"
alias ffmpeg-template-screencast="ffmpeg -f x11grab -s wxga -r 30 -i :0.0 -qscale 0 /tmp/out.mpg"

# menu maker
alias fluxbox-generate_menu-template="fluxbox-generate_menu -kg -su -t mate-terminal -w www.google.com -is -ds"
alias mmaker-template="mmaker -t Konsole -vf openbox3"

# qemu
alias qemu-template-test-iso="qemu-system-x86_64 --enable-kvm -m 512M -cdrom" #path here

# vnc
alias vncserver-template-connect="vncviewer -passwd ~/.vnc/passwd localhost:1"
alias vncserver-template-kill="vncserver -kill :1"
alias vncserver-template-start="vncserver -geometry 960x540 -alwaysshared -dpi 96 :1" # using DISPLAY=:1

# webmin
alias webmin-template="sudo systemctl start webmin && "${BROWSER}" localhost:10000"

# wget
alias wget-template-pdf="wget -e robots=off -A pdf -mpEkK -np -t inf -T 60 --"
alias wget-template-spider="wget -e robots=off --wait=2 --random-wait --recursive --span-hosts --spider --timestamping --tries=5 --dns-timeout=30 --connect-timeout=5 --read-timeout=5 --level=10 --"

# winetricks
alias winetricks-template-install="winetricks corefonts vcrun2005 vcrun2008 vb6run"

# world (Arch)
alias world="sudo pacman -Syu"
alias worldd="packer -Syu --auronly --devel --noconfirm"
alias aura-template="aura -Akuax"
alias yaourt-template="yaourt -Syu --devel --aur"
alias pacbuilder-template="pacbuilder -Sbkvn"

# xephyr
alias xephyr-template="Xephyr -ac -br -noreset -screen 1024x768 :1" # export DISPLAY=:1 to execute commands

# xrandr
alias xrandr-template-hdmi-connected="xrandr --output LVDS1 --primary --output HDMI1 --auto --left-of LVDS1 && sh ~/.fehbg"
alias xrandr-template-hdmi-disconnected="xrandr --output HDMI1 --off && sh ~/.fehbg"
alias xrandr-template-hdmi-mirror="xrandr --output LVDS1 --auto --output HDMI1 --auto --same-as LVDS1 && sh ~/.fehbg"
alias xrandr-template-reset="xrandr --output LVDS1 --primary --mode 1366x768"

# youtube-dl
alias youtube-dl-template-mp3="youtube-dl --continue --title --restrict-filenames --extract-audio --audio-format mp3"
alias youtube-dl-template-video="youtube-dl --continue --title --restrict-filenames"

# environment options
export _JAVA_OPTIONS='-Dawt.useSystemAAFontSettings=on -Dswing.aatext=true -Dswing.defaultlaf=com.sun.java.swing.plaf.gtk.GTKLookAndFeel'
export HISTCONTROL=ignoreboth # ignore consecutive entries of history
export WINEARCH="win64"
export WINEDEBUG="fixme-all"
export WINEPREFIX="~/.wine"

# environment customizations
export BROWSER="/usr/bin/chromium"
export EDITOR="/usr/bin/emacs -nw"
export FILEMANAGER="/usr/bin/spacefm"
export RAMDISK="~/ramdisk/"
export TERMINAL="/usr/bin/sakura"
export VISUAL="/usr/bin/emacs"

# path
# export PATH="$PATH:/opt/android-sdk/platform-tools/"
# export PATH="~/.gem/ruby/2.1.0/bin:$PATH"

# arch-chroot for non-arch systems
function changeroot {
    sudo cp -L /etc/resolv.conf "$1"/etc/resolv.conf
    sudo mount -t proc proc "$1"/proc
    sudo mount -t sysfs sys "$1"/sys
    sudo mount -o bind /dev "$1"/dev
    sudo mount -t devpts pts "$1"/dev/pts/
    sudo chroot "$1"/ /bin/bash
}

# to actually create a chroot, see manpage (uses pacstrap...)
alias systemd-nspawn-template="systemd-nspawn -bD"

# Alternatives include:
# - arch-chroot
# - schroot
# - devtools package (for packagers)

# AUR Keychain (modus operandi)
# - /usr/share/pacman to get PKGBUILD prototypes
# - makepkg --source (better: mkaurball, if sharing)
# - burp (aur uploader)


function qkkdiff-file {
    pkg="$(pacman -Qo $1 | awk '//{printf "%s-%s", $(NF-1), $NF;}')"
    bsdtar -xOf /var/cache/pacman/pkg/${pkg}-x86_64.pkg.tar.xz ${1/\//} | diff - $1
    return 0
}

function qkkdiff {
    ver=$(pacman -Q $1 | cut -f2 -d' ')
    pacman -Qkkq $1 | while read package file; do echo $file; bsdtar -xOf /var/cache/pacman/pkg/${package}-${ver}-x86_64.pkg.tar.xz ${file/\//} | diff - $file  ; done
    return 0
}


# typos
alias eamcs="emacs"
alias pacma="pacman"
alias sl="ls"

# remember
alias dmidecode-remember="sudo dmidecode -t 1"
alias inxi-remember="inxi -F -M"
alias jekyll-serve-remember="jekyll serve --baseurl='' --watch"
