# -*- shell-script -*-
# This is intended as a complement to oh-my-zsh framework.

# tweaks
alias cp="cp -v -i"
alias mv="mv -v -i"
alias rm="rm -v -i"
alias chmod="chmod -v"
alias chown="chown -v"
alias df='df -h'                          # human-readable sizes
alias du="du -h"
alias free="free -m"                      # show sizes in MB
alias grep="grep --color=auto -E -d skip"
alias ln="ln -v"
alias pgrep="pgrep --list-name"
alias emq="emacs -nw"		# shell
alias cower="cower --color=always --sort=votes"
alias pingg="ping google.com"

# templates
alias wget-template="wget -e robots=off -mpEkK -np -t inf -T 60 --"
alias wget-template-pdf="wget -e robots=off -A pdf -mpEkK -np -t inf -T 60 --"
alias wget-template-span="wget -e robots=off --wait=2 --random-wait --recursive --span-hosts --spider --timestamping --tries=5 --dns-timeout=30 --connect-timeout=5 --read-timeout=5 --level=10 --"
alias mount-iso-template="mount -o loop"
alias rsync-template="rsync -uzlLh --verbose --times --recursive --progress"
alias rsync-exclude-template="rsync -uzlLh --verbose --times --recursive --progress --delete-excluded"
alias youtube-dl-mp3-template="youtube-dl -t --restrict-filenames --extract-audio --audio-format mp3"
alias youtube-dl-flv-template="youtube-dl -t --restrict-filenames"
alias fluxbox-generate_menu-template="fluxbox-generate_menu -kg -su -t lxterminal -w www.startpage.com -is -ds"
## dd-aliases with progress indicator
# (pv -n /dev/sda | dd of=/dev/sdb bs=128M conv=notrunc,noerror) 2>&1 | dialog --gauge "Running dd command (cloning), please wait..." 10 70 0
# pv -tpreb /dev/sda | dd of=/dev/sdb bs=4096 conv=notrunc,noerror

# distro specific commands
if [[ -f /etc/arch-release  ]] || [[ -f /etc/manjaro-release ]]; then
    alias world="sudo pacman -Syyuu"
    alias worldw="sudo pacman-optimize" # yaourt -Sbu --aur"
elif
    [[ -f /etc/debian-release ]] || [[ -f /etc/ubuntu-release ]]; then
    alias world="sudo aptitude -y update && sudo aptitude -y upgrade"
    alias worldw="sudo apt-get -y dist-upgrade && sudo apt-get -y autoclean && sudo apt-get -y autoremove"
elif
    [[ -f /etc/fedora-release ]]; then
    alias world="sudo yum -y update && sudo yum -y upgrade"
    alias worldw="sudo yum -y autoremove && sudo yum -y clean all"
elif
    [[ -f /etc/suse-release ]]; then
    alias world="sudo zypper -n update && sudo zypper -n upgrade && sudo -n zypper dup"
fi

export BROWSER="/usr/bin/firefox"
export EDITOR="emacs -nw"
export VISUAL="emacs"
export PAGER="less"

# sort aur packages by their number of votes with cower -- https://bbs.archlinux.org/viewtopic.php?id=167554
cower_votes() {
    cower --format "%n %o" -s $1 | grep $1 | grep -v extension | sort -nk 2 | column -t
}

# improved chroot
function changeroot {
    sudo cp -L /etc/resolv.conf $1/etc/resolv.conf
    sudo mount -t proc proc $1/proc
    sudo mount -t sysfs sys $1/sys
    sudo mount -o bind /dev $1/dev
    sudo mount -t devpts pts $1/dev/pts/
    sudo chroot $1/ /bin/bash
}
