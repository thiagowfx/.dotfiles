# Minimal starship config matching grml prompt
format = "$status$sudo$username$hostname$directory$git_branch$git_state$git_status${custom.git_worktree}${custom.github_pr}$line_break$character"
right_format = "$cmd_duration$jobs"
add_newline = true

[status]
disabled = false
format = "[$status ]($style)"
style = "bold red"

[username]
show_always = true
format = "[$user](bold green)"

[hostname]
ssh_only = true
trim_at = "."
format = "@$hostname"

[directory]
truncation_length = 10
truncate_to_repo = false
format = " [$path](bold) "

[git_branch]
symbol = "git:"
format = "[$symbol$branch](bold cyan)"

[git_state]
format = "|[$state]()"

[git_status]
format = "[$conflicted$deleted$renamed$modified$staged$untracked$ahead_behind](red)"

[cmd_duration]
min_time = 2000
format = "[$duration](yellow) "

[jobs]
format = "[$number](cyan) "

[sudo]
disabled = false
format = "[ðŸ§™](red) "

[character]
success_symbol = "[â¯](green)"
error_symbol = "[x](red)"

[custom.git_worktree]
command = "printf 'âŽ‡ %s' \"$(basename \"$(pwd)\")\""
when = "[ -f .git ]"
format = " [$output]($style)"
style = "bold yellow"

[custom.github_pr]
command = "bkt --ttl=10m --scope=\"$(git rev-parse --show-toplevel):$(git branch --show-current)\" -- gh pr view --json number --jq '\"#\" + (.number | tostring)' 2>/dev/null"
when = "git rev-parse --is-inside-work-tree 2>/dev/null"
format = " [$output](magenta)"
ignore_timeout = true
