---
- name: bootstrap environment
  hosts: all
  roles:
    - role: elliotweiser.osx-command-line-tools
  tasks:
    # https://stackoverflow.com/questions/98310/focus-follows-mouse-plus-auto-raise-on-mac-os-x
    - name: set focus follows mouse on Terminal.app
      community.general.osx_defaults:
        domain: com.apple.Terminal
        key: FocusFollowsMouse
        type: bool
        value: true
        state: present
    # https://stackoverflow.com/questions/39972335/how-do-i-press-and-hold-a-key-and-have-it-repeat-in-vscode
    - name: unset key press and hold on VSCode.app
      community.general.osx_defaults:
        domain: com.microsoft.VSCode
        key: ApplePressAndHoldEnabled
        type: bool
        value: false
        state: present
    - name: install git and stow
      ansible.builtin.package:
        name: "{{ item }}"
        state: present
      with_items:
        - git
        - stow
    - name: install brew apps
      community.general.homebrew:
        name: "{{ item }}"
      with_items:
        - ack
        - ansible
        - atool
        - bash
        - bash-completion@2
        - coreutils
        - direnv
        - entr
        - exa
        - fd
        - fpp
        - fzf
        - gh
        # - htop
        # - hugo
        - imagemagick
        - jq
        # - less
        - make
        - moreutils
        - mr
        - mtr
        - ncdu
        - ranger
        - shellcheck
        - tig
        - tmux
        - tree
        - vim
        - watch
        - wget
        - zoxide
        - zsh-completions
    - name: install brew casks
      community.general.homebrew_cask:
        name: "{{ item }}"
      with_items:
        # - 1password
        - anki
        - basictex
        # - calibre
        # - font-cascadia-code
        # - font-fira-code
        # - font-fira-sans
        # - font-ibm-plex-mono
        - google-chrome
        - google-drive
        - iterm2
        # - jellyfin
        - karabiner-elements
        - maccy
        - obsidian
        # - qbittorrent
        - qlmarkdown
        - rectangle
        - spotify
        - textmate
        - visual-studio-code
        - vlc
        # - windscribe
