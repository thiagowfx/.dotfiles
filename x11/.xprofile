#!/bin/sh
# shellcheck source=/dev/null
#
# Sourced by most display managers (GDM, LightDM, LXDM, SDDM, etc).
# ~/.xinitrc is configured to source it as well.
#
# https://wiki.archlinux.org/title/Xprofile

# Parse user session environment variables.
# This file is shared with the systemd user instance.
# Export all variables: https://stackoverflow.com/a/30969768/1745064
set -a
[ -r ~/.config/environment.d/user.conf ] && . ~/.config/environment.d/user.conf
set +a

# Set preferred terminal emulator in reverse order of preference for i3-sensible-terminal.
hash tilix >/dev/null 2>&1 && export TERMINAL="tilix"
hash alacritty >/dev/null 2>&1 && export TERMINAL="alacritty"

# Set X11 wallpaper if existing.
[ -x ~/.fehbg ] && ~/.fehbg

# xset s 1200  # 20min
# hash xsecurelock >/dev/null 2>&1 && XSECURELOCK_COMPOSITE_OBSCURER=0 xss-lock -l -n /usr/lib/xsecurelock/dimmer -- xsecurelock

hash picom >/dev/null 2>&1 && picom -i 0.95 --daemon --backend glx

# Autostart XDG applications (.desktop files).
# https://wiki.archlinux.org/title/XDG_Autostart
#
# Troubleshooting:
#   dex -ade i3
dex --autostart --environment i3
